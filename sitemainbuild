<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>US States ‚Ä¢ Flags, Year Joined, Brief History (to 2000)</title>
<style>
  :root{
    --bg:#0f172a;         /* slate-900 */
    --card:#111827;       /* gray-900 */
    --muted:#94a3b8;      /* slate-400 */
    --text:#e5e7eb;       /* gray-200 */
    --brand:#60a5fa;      /* blue-400 */
    --accent:#22d3ee;     /* cyan-400 */
    --ok:#34d399;         /* emerald-400 */
    --warn:#f59e0b;       /* amber-500 */
    --tile:#1f2937;       /* gray-800 */
    --tile-border:#374151;/* gray-700 */
    --focus:#fef08a;      /* yellow-200 */
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;}
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    background: radial-gradient(1200px 800px at 70% -10%, #1f2937 0%, var(--bg) 45%, #0b1024 100%);
    color: var(--text);
  }
  header{
    padding:20px 16px 8px;
    display:flex;flex-wrap:wrap;align-items:center;gap:12px;justify-content:space-between;
  }
  .title{
    display:flex;align-items:center;gap:12px;font-weight:700;font-size:clamp(18px,4vw,26px);
  }
  .title .dot{width:10px;height:10px;border-radius:999px;background:linear-gradient(45deg,var(--brand),var(--accent));box-shadow:0 0 12px var(--brand);}
  .sub{font-size:12px;color:var(--muted)}
  .controls{
    display:flex;gap:8px;flex-wrap:wrap;align-items:center;
  }
  .chip{
    background:linear-gradient(180deg,#0b1226,#0a0f1f);
    border:1px solid #1f2a44;border-radius:12px;
    padding:8px 10px;display:flex;gap:8px;align-items:center;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.05), 0 6px 18px rgba(0,0,0,0.2);
  }
  input[type="search"], select{
    background:transparent;color:var(--text);border:none;outline:none;min-width:180px;
  }
  .btn{
    border:none;cursor:pointer;color:#0b1020;background:linear-gradient(180deg,#b9ddff,#7ec2ff);
    padding:10px 12px;border-radius:12px;font-weight:700;
    box-shadow:0 10px 22px rgba(96,165,250,0.3), inset 0 1px 0 #fff9;
  }
  .btn:active{transform:translateY(1px)}
  main{display:grid;grid-template-columns: 1.1fr 0.9fr; gap:16px; padding:12px 16px 28px;}
  @media (max-width: 960px){ main{grid-template-columns:1fr} }

  /* Card */
  .card{
    background:linear-gradient(180deg,#0f152b,#0b1120);
    border:1px solid #1d2441;border-radius:18px;padding:14px;
    box-shadow:0 20px 50px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.04);
  }
  .card h2{margin:4px 0 12px;font-size:18px}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .muted{color:var(--muted)}
  .sep{height:1px;background:#1f2a44;margin:10px 0}

  /* Tile Map */
  .grid{
    --cols: 12;
    display:grid;
    grid-template-columns: repeat(var(--cols), minmax(42px,1fr));
    gap:6px; user-select:none;
  }
  .tile{
    position:relative; aspect-ratio: 6/5;
    background: radial-gradient(60% 60% at 30% 25%, #2a385b 0%, var(--tile) 60%);
    border:1px solid var(--tile-border);
    border-radius:10px; display:flex;align-items:center;justify-content:center;
    font-weight:700; letter-spacing:0.3px; cursor:pointer; transition: transform .15s ease, box-shadow .15s ease;
    box-shadow: 0 6px 14px rgba(0,0,0,0.35);
  }
  .tile:hover{transform:translateY(-2px); box-shadow:0 12px 28px rgba(0,0,0,0.45)}
  .tile .abbr{font-size:13px}
  .tile .year{position:absolute;bottom:6px;right:8px;font-size:10px;color:#c7d2fe}
  .tile.joined{outline:2px solid var(--ok); box-shadow:0 0 0 4px rgba(52,211,153,0.15)}
  .tile.focus{outline:2px dashed var(--focus)}
  .legend{display:flex;gap:10px;align-items:center;font-size:12px}
  .dot{width:10px;height:10px;border-radius:20px}
  .d-ok{background:var(--ok)}
  .d-brand{background:var(--brand)}

  /* Details panel */
  .details{display:grid;grid-template-columns: 92px 1fr;gap:14px}
  .flag{
    width:92px; height:60px; border-radius:8px; background:#0b1226;
    border:1px solid #1f2a44; object-fit:cover; object-position:center;
  }
  .placeholder-flag{display:grid;place-items:center;font-size:10px;color:var(--muted)}
  .state-line{display:flex;gap:10px;align-items:baseline;flex-wrap:wrap}
  .state-line h3{margin:0;font-size:22px}
  .pill{padding:4px 8px;border-radius:999px;background:#0b1226;border:1px solid #1f2a44;color:#c7d2fe;font-size:12px}
  .history{line-height:1.5;color:#dbe2f1;font-size:14px;white-space:pre-wrap}
  .tools{display:flex;gap:8px;flex-wrap:wrap}
  .ghost{background:transparent;color:var(--text);border:1px dashed #2a3860}
  .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; background:#0b1226;border:1px solid #1f2a44;border-radius:8px;padding:2px 6px;color:#c7d2fe}
  .notice{font-size:12px;color:var(--muted);margin-top:6px}

  /* Modal */
  dialog{
    border:none;border-radius:16px; padding:0; background:#0b1120; color:var(--text);
    width:min(720px, 92vw); box-shadow:0 40px 120px rgba(0,0,0,0.6);
  }
  .dlg-head{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-bottom:1px solid #1d2441}
  .dlg-body{padding:16px}
  .dlg-close{all:unset;cursor:pointer;padding:6px 10px;border-radius:8px;background:#111a36}
  .dlg-grid{display:grid;grid-template-columns:120px 1fr; gap:14px}
  .dlg-flag{width:120px;height:78px;border-radius:10px;border:1px solid #1f2a44;background:#0b1226;object-fit:cover}
  .dlg-meta{display:flex;gap:8px;flex-wrap:wrap}
  .dlg-meta .pill{background:#0b1226}
  textarea{
    width:100%;min-height:140px;border-radius:12px;background:#0b1226;border:1px solid #1f2a44;color:var(--text);padding:10px;resize:vertical
  }

  footer{padding:18px;color:var(--muted);text-align:center;font-size:12px}
  .fade-in{animation:fade .6s ease both}
  @keyframes fade{from{opacity:0; transform:translateY(4px)}}
</style>
</head>
<body>
  <header>
    <div>
      <div class="title"><span class="dot"></span> US States ‚Äî Flags ‚Ä¢ Year Joined ‚Ä¢ Brief History</div>
      <div class="sub">Click a state tile. Play the ‚ÄúJoin the Union‚Äù animation. Edit histories in the embedded data section below.</div>
    </div>
    <div class="controls">
      <div class="chip">
        üîé<input id="search" type="search" placeholder="Search state‚Ä¶" />
      </div>
      <div class="chip">
        Sort:
        <select id="sort">
          <option value="year">By year joined</option>
          <option value="name">Alphabetical</option>
        </select>
      </div>
      <button class="btn" id="play">‚ñ∂ Join-the-Union</button>
    </div>
  </header>

  <main>
    <section class="card fade-in">
      <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:10px">
        <h2>Interactive US Map (Tile Grid)</h2>
        <div class="legend">
          <span class="dot d-ok"></span> Joined highlight
          <span class="dot d-brand" style="margin-left:12px"></span> Focus
        </div>
      </div>
      <div id="grid" class="grid" aria-label="US tile map"></div>
    </section>

    <aside class="card fade-in">
      <h2>Details</h2>
      <div class="details" id="details">
        <div class="flag placeholder-flag">flag<br/>preview</div>
        <div>
          <div class="state-line">
            <h3 id="d-name">Select a state</h3>
            <span class="pill">Year: <span id="d-year">‚Äî</span></span>
          </div>
          <div class="tools" style="margin:6px 0 10px">
            <button class="btn ghost" id="openModal">Open details</button>
            <span class="kbd">Tip: type to search</span>
          </div>
          <div id="d-history" class="history">Click a tile to see the brief history (through 2000). You can edit the text inside the data section in this file.</div>
          <div class="notice">To show an actual flag, set a <code>flag</code> URL/path in the data for that state.</div>
        </div>
      </div>
    </aside>
  </main>

  <dialog id="modal">
    <div class="dlg-head">
      <div class="row">
        <strong id="m-name">State</strong>
        <span class="pill">Year <span id="m-year">‚Äî</span></span>
      </div>
      <button class="dlg-close" id="closeModal">‚úï</button>
    </div>
    <div class="dlg-body">
      <div class="dlg-grid">
        <img id="m-flag" class="dlg-flag" alt="State flag preview" />
        <div>
          <div class="dlg-meta">
            <span class="pill" id="m-abbr"></span>
            <span class="pill">Joined: <span id="m-joined"></span></span>
          </div>
          <div class="sep"></div>
          <label for="m-history">Brief history (to year 2000)</label>
          <textarea id="m-history"></textarea>
        </div>
      </div>
      <div class="row" style="justify-content:flex-end;margin-top:12px">
        <button class="btn" id="saveHistory">Save</button>
      </div>
    </div>
  </dialog>

  <footer>¬© Your Name ‚Äî GitHub Pages ready. Single-file app. No external libraries.</footer>

<script>
/* ============================================================
   DATA SECTION ‚Äî edit histories and (optionally) flag image URLs.
   If you add a flag URL/path, it will render in the panel & modal.
   ============================================================ */
const STATES = [
  // name, abbr, year, flag(optional), history (short, to year 2000)
  {name:"Delaware", abbr:"DE", year:1787, flag:"", history:"First to ratify the Constitution (1787). Early economy in milling and shipping; 20th century saw corporate law prominence."},
  {name:"Pennsylvania", abbr:"PA", year:1787, flag:"", history:"Founded by William Penn; pivotal in independence. Industrial powerhouse (steel, coal). Postwar diversification."},
  {name:"New Jersey", abbr:"NJ", year:1787, flag:"", history:"Strategic in Revolution; later a transport/manufacturing hub. Suburban growth through the 20th century."},
  {name:"Georgia", abbr:"GA", year:1788, flag:"", history:"From colonial frontier to cotton economy; Civil War & Reconstruction; 20th-century growth in industry and Atlanta."},
  {name:"Connecticut", abbr:"CT", year:1788, flag:"", history:"Early manufacturing, whaling, insurance. Notable for constitutional development and education centers."},
  {name:"Massachusetts", abbr:"MA", year:1788, flag:"", history:"Birthplace of American Revolution; shipping, industry, then higher-ed/tech by late 1900s."},
  {name:"Maryland", abbr:"MD", year:1788, flag:"", history:"Colonial port trade (Baltimore). Border state in Civil War; later diversified economy incl. federal research."},
  {name:"South Carolina", abbr:"SC", year:1788, flag:"", history:"Plantation economy; secession start (Fort Sumter). 20th-century textile then auto/aerospace growth."},
  {name:"New Hampshire", abbr:"NH", year:1788, flag:"", history:"From timber/shipbuilding to mills; late-20th-century services and tech along I-93/I-95 corridors."},
  {name:"Virginia", abbr:"VA", year:1788, flag:"", history:"Colonial core; Civil War battleground; 20th-century federal/military and tech economy in NoVA."},
  {name:"New York", abbr:"NY", year:1788, flag:"", history:"Commercial/immigration gateway; finance/media hub. Upstate industry peaked mid-20th century."},
  {name:"North Carolina", abbr:"NC", year:1789, flag:"", history:"From tobacco/textiles to banking and Research Triangle by late 1900s."},
  {name:"Rhode Island", abbr:"RI", year:1790, flag:"", history:"Religious liberty roots; maritime trade; early industrialization in textiles; services by 2000."},
  {name:"Vermont", abbr:"VT", year:1791, flag:"", history:"Independent republic until 1791; dairy/forestry; environmental and tourism emphasis."},
  {name:"Kentucky", abbr:"KY", year:1792, flag:"", history:"Frontier state; agriculture (tobacco, horses); coal in Appalachia; manufacturing by late 20th century."},
  {name:"Tennessee", abbr:"TN", year:1796, flag:"", history:"Frontier expansion; Civil War divisions; later music hub (Nashville/Memphis) and manufacturing."},
  {name:"Ohio", abbr:"OH", year:1803, flag:"", history:"Industrial/auto state; canal/rail growth; Rust Belt shifts late 20th century."},
  {name:"Louisiana", abbr:"LA", year:1812, flag:"", history:"French/Spanish heritage; port of New Orleans; oil/petrochemicals by 1900s."},
  {name:"Indiana", abbr:"IN", year:1816, flag:"", history:"Agriculture to manufacturing/auto; Indianapolis as transport hub."},
  {name:"Mississippi", abbr:"MS", year:1817, flag:"", history:"Cotton economy; Civil War & Reconstruction; 20th-century agriculture & shipbuilding; persistent poverty issues."},
  {name:"Illinois", abbr:"IL", year:1818, flag:"", history:"Chicago growth via canals/rail; meatpacking/industry; finance and services by 2000."},
  {name:"Alabama", abbr:"AL", year:1819, flag:"", history:"Cotton and steel (Birmingham); Civil Rights Movement; diversified manufacturing by late 1900s."},
  {name:"Maine", abbr:"ME", year:1820, flag:"", history:"Split from MA (Missouri Compromise). Lumber, shipbuilding, fishing; tourism and paper mills."},
  {name:"Missouri", abbr:"MO", year:1821, flag:"", history:"Gateway to the West; border tensions in Civil War; later aerospace and transport industry."},
  {name:"Arkansas", abbr:"AR", year:1836, flag:"", history:"Frontier to agriculture; mid-20th-century retail/logistics growth (Walton/Walmart)."},
  {name:"Michigan", abbr:"MI", year:1837, flag:"", history:"Auto industry cradle (Detroit); Great Lakes trade; late-century restructuring."},
  {name:"Florida", abbr:"FL", year:1845, flag:"", history:"Spanish roots; citrus/Phosphate; postwar boom in tourism/space/aerospace."},
  {name:"Texas", abbr:"TX", year:1845, flag:"", history:"Former republic; cattle/oil; late-20th-century tech and metro growth."},
  {name:"Iowa", abbr:"IA", year:1846, flag:"", history:"Corn/soy agriculture; farm manufacturing; wind energy by late 1900s."},
  {name:"Wisconsin", abbr:"WI", year:1848, flag:"", history:"Dairy/beer/industry; progressive politics; manufacturing to services transition."},
  {name:"California", abbr:"CA", year:1850, flag:"", history:"Gold Rush; rail and agriculture; entertainment/tech dominance by 2000."},
  {name:"Minnesota", abbr:"MN", year:1858, flag:"", history:"Timber/iron ore; milling in Minneapolis; medical devices and Fortune 500s."},
  {name:"Oregon", abbr:"OR", year:1859, flag:"", history:"Oregon Trail settlement; timber/fishing; high-tech corridor by late century."},
  {name:"Kansas", abbr:"KS", year:1861, flag:"", history:"Bleeding Kansas pre-Civil War; prairie agriculture; aircraft industry in Wichita."},
  {name:"West Virginia", abbr:"WV", year:1863, flag:"", history:"Split from VA during Civil War; coal mining central; diversification efforts by 2000."},
  {name:"Nevada", abbr:"NV", year:1864, flag:"", history:"Comstock Lode silver; later gaming/tourism in Las Vegas/Reno."},
  {name:"Nebraska", abbr:"NE", year:1867, flag:"", history:"Homestead era; agriculture and rail hubs; insurance/finance in Omaha/Lincoln."},
  {name:"Colorado", abbr:"CO", year:1876, flag:"", history:"Centennial state; mining to aerospace/tech; tourism in Rockies."},
  {name:"North Dakota", abbr:"ND", year:1889, flag:"", history:"Prairie agriculture; energy (lignite, later oil); sparse population."},
  {name:"South Dakota", abbr:"SD", year:1889, flag:"", history:"Agriculture; Black Hills gold; tourism (Mt. Rushmore)."},
  {name:"Montana", abbr:"MT", year:1889, flag:"", history:"Mining/ranching; federal lands; tourism outdoors economy."},
  {name:"Washington", abbr:"WA", year:1889, flag:"", history:"Timber/ports; Boeing; software/tech by 1990s."},
  {name:"Idaho", abbr:"ID", year:1890, flag:"", history:"Mining/timber; irrigation agriculture; growing tech/ag-processing by 2000."},
  {name:"Wyoming", abbr:"WY", year:1890, flag:"", history:"Ranching/minerals; early women‚Äôs suffrage; tourism (Yellowstone)."},
  {name:"Utah", abbr:"UT", year:1896, flag:"", history:"LDS settlement; mining/defense; tech along Wasatch Front."},
  {name:"Oklahoma", abbr:"OK", year:1907, flag:"", history:"Land runs/Indian Territory; oil booms; aerospace/energy mix."},
  {name:"New Mexico", abbr:"NM", year:1912, flag:"", history:"Hispano/Indigenous heritage; labs (Los Alamos/Sandia); energy/tourism."},
  {name:"Arizona", abbr:"AZ", year:1912, flag:"", history:"Copper, cotton, citrus; postwar growth; aerospace and retirees."},
  {name:"Alaska", abbr:"AK", year:1959, flag:"", history:"Purchased from Russia; resources (oil, fishing); strategic location."},
  {name:"Hawaii", abbr:"HI", year:1959, flag:"", history:"Polynesian kingdom to U.S. state; sugar/pineapple; tourism and Pacific hub."},
];

/* Optional: set a flag image URL per state, e.g.:
   find(s=>"California").flag = "images/ca.png"; */

function find(abbrOrName){
  const k = abbrOrName.toUpperCase();
  return STATES.find(s => s.abbr===k || s.name.toUpperCase()===k);
}

/* ============================================================
   BUILD TILE MAP
   ============================================================ */
const grid = document.getElementById('grid');
const search = document.getElementById('search');
const sortSel = document.getElementById('sort');
const playBtn = document.getElementById('play');

const detailName = document.getElementById('d-name');
const detailYear = document.getElementById('d-year');
const detailHist = document.getElementById('d-history');
const details = document.getElementById('details');
const openModalBtn = document.getElementById('openModal');

const modal = document.getElementById('modal');
const mName = document.getElementById('m-name');
const mYear = document.getElementById('m-year');
const mJoined = document.getElementById('m-joined');
const mAbbr = document.getElementById('m-abbr');
const mFlag = document.getElementById('m-flag');
const mHistory = document.getElementById('m-history');
document.getElementById('closeModal').onclick = ()=> modal.close();
document.getElementById('saveHistory').onclick = ()=>{
  const s = find(mAbbr.textContent);
  if(s){ s.history = mHistory.value; renderDetails(s); modal.close(); renderTiles(); }
};

let focusAbbr = "CA"; // default focus
let playing = false;

/* A common tile layout (tile map) that approximates US geography.
   Rows are arrays of state abbreviations. Use "" as spacer. */
const TILE_LAYOUT = [
  // Row 1 (top, incl. AK, HI to the left)
  ["AK","","","","","","","","","","","HI"],
  // Row 2 (Pacific NW -> MT/ND)
  ["WA","ID","MT","ND","","","","","","","", ""],
  // Row 3
  ["OR","NV","WY","SD","","","","","","","", ""],
  // Row 4
  ["CA","UT","CO","NE","MN","WI","MI","","","VT","NH","ME"],
  // Row 5
  ["","AZ","NM","KS","IA","IL","IN","OH","PA","NY","MA","RI"],
  // Row 6
  ["","", "OK","MO","AR","KY","WV","VA","MD","DE","NJ","CT"],
  // Row 7
  ["","", "TX","LA","MS","TN","AL","GA","SC","NC","",""],
  // Row 8
  ["","","","","","", "FL","","","","",""]
];

/* Render tiles according to current sort & filter */
function renderTiles(){
  grid.innerHTML = "";
  const q = (search.value || "").trim().toLowerCase();
  const sorter = (sortSel.value==="name")
    ? (a,b)=> a.name.localeCompare(b.name)
    : (a,b)=> a.year - b.year || a.name.localeCompare(b.name);

  const map = new Map(STATES.map(s=>[s.abbr, s]));
  const flat = TILE_LAYOUT.flat().filter(x=>x);
  const statesInLayout = flat.map(ab=>map.get(ab)).filter(Boolean);

  // order is layout, but we can apply CSS order by sorter for ‚ÄúSort by ‚Ä¶‚Äù views
  const sorted = [...statesInLayout].sort(sorter);

  // to keep the spatial layout while supporting filter, we‚Äôll still draw by layout,
  // but hide tiles not matching the search query.
  TILE_LAYOUT.forEach(row=>{
    row.forEach(cell=>{
      if(!cell){ const spacer = document.createElement("div"); spacer.style.height="0"; grid.appendChild(spacer); return; }
      const s = map.get(cell);
      const match = !q || s.name.toLowerCase().includes(q) || s.abbr.toLowerCase().includes(q);
      const tile = document.createElement("div");
      tile.className = "tile";
      if(s.abbr===focusAbbr) tile.classList.add("focus");
      tile.dataset.abbr = s.abbr;
      tile.title = `${s.name} ‚Äî Joined ${s.year}`;
      tile.style.visibility = match ? "visible" : "hidden";
      tile.innerHTML = `<div class="abbr">${s.abbr}</div><div class="year">${s.year}</div>`;
      tile.onclick = ()=> { focusAbbr = s.abbr; renderDetails(s); highlightFocus(); };
      grid.appendChild(tile);
    });
  });

  // animate visible tiles lightly
  [...grid.children].forEach((el,i)=>{
    if(el.classList.contains("tile") && el.style.visibility!=="hidden"){
      el.animate([
        {opacity:0, transform:"translateY(6px)"},
        {opacity:1, transform:"translateY(0)"}
      ], {duration:220, delay: i*10, easing:"cubic-bezier(.2,.8,.2,1)"});
    }
  });
}
function highlightFocus(){
  [...grid.querySelectorAll('.tile')].forEach(t=>t.classList.toggle('focus', t.dataset.abbr===focusAbbr));
}

/* Render right-side details */
function renderDetails(s){
  detailName.textContent = s.name;
  detailYear.textContent = s.year;
  detailHist.textContent = s.history || "(Add a brief history up to year 2000.)";

  // flag in side panel
  let flagEl = details.querySelector('img.flag');
  if(!flagEl){
    const img = document.createElement('img');
    img.className = "flag";
    details.querySelector('.flag')?.replaceWith(img);
    flagEl = img;
  }
  if(s.flag){
    flagEl.src = s.flag;
    flagEl.alt = `${s.name} flag`;
  } else {
    // placeholder
    flagEl.removeAttribute('src');
    flagEl.alt = "No flag set";
    flagEl.style.background = "repeating-linear-gradient(45deg,#0b1226,#0b1226 8px,#0d1630 8px,#0d1630 16px)";
  }

  // modal prep
  mName.textContent = s.name;
  mYear.textContent = s.year;
  mJoined.textContent = s.year;
  mAbbr.textContent = s.abbr;
  mHistory.value = s.history || "";
}
openModalBtn.onclick = ()=> {
  const s = find(focusAbbr);
  if(!s) return;
  renderDetails(s);
  modal.showModal();
};

/* Join-the-Union playback: highlight tiles in chronological order */
async function playTimeline(){
  if(playing) return;
  playing = true;
  playBtn.textContent = "‚èπ Stop";
  const order = [...STATES].sort((a,b)=>a.year-b.year || a.name.localeCompare(b.name));
  const tiles = new Map([...grid.querySelectorAll('.tile')].map(t=>[t.dataset.abbr,t]));

  // clear old highlight
  tiles.forEach(t=>t.classList.remove('joined'));

  for(const s of order){
    if(!playing) break;
    const tile = tiles.get(s.abbr);
    if(tile){
      tile.classList.add('joined');
      tile.animate([
        {boxShadow:"0 0 0 0 rgba(52,211,153,0)", transform:"translateY(0)"},
        {boxShadow:"0 0 0 12px rgba(52,211,153,0.18)", transform:"translateY(-2px)"},
        {boxShadow:"0 0 0 0 rgba(52,211,153,0)", transform:"translateY(0)"}
      ], {duration:650, easing:"ease-out"});
      focusAbbr = s.abbr;
      renderDetails(s);
      highlightFocus();
      await new Promise(r=>setTimeout(r, 160));
    }
  }
  playBtn.textContent = "‚ñ∂ Join-the-Union";
  playing = false;
}

playBtn.onclick = ()=>{
  if(playing){ playing = false; playBtn.textContent = "‚ñ∂ Join-the-Union"; }
  else playTimeline();
};

search.addEventListener('input', renderTiles);
sortSel.addEventListener('change', ()=>{
  // we keep spatial layout; sort selector mainly affects timeline order & potential future list views
  // here we just reanimate tiles for feedback
  renderTiles();
});

window.addEventListener('DOMContentLoaded', ()=>{
  renderTiles();
  const start = find("CA") || STATES[0];
  renderDetails(start);
});

/* Tiny helper for quick data tweaks in console:
   find("CA").flag = "images/ca.png"; renderDetails(find("CA")); renderTiles(); */
</script>
</body>
</html>
